galaxy_job_config:
  runners:
    local_runner:
      load: galaxy.jobs.runners.local:LocalJobRunner
      workers: 4
  handling:
    assign: ['db-skip-locked']
  execution:
    default: local_env
    environments:
      local_env:
        runner: local_runner
        tmp_dir: true
  tools:
    - class: local # these special tools that aren't parameterized for remote execution - expression tools, upload, etc
      environment: local_env

galaxy_config:
  galaxy:
    tool_dependency_dir: /tool_deps
    tool_data_table_config_path: /cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml
    builds_file_path: /export/galaxy/tool-data/shared/ucsc/builds.txt
    datatypes_config_file: /lib/galaxy/config/galaxy/datatypes_conf.xml
    # Main Configuration
    admin_users:
    - admin@galaxy.org
    database_connection: postgresql://galaxy:galaxy@localhost:5432/galaxy
    file_path: /export/galaxy-central/database/files
    job_working_directory: /cluster_storage/galaxy/galaxy_export/galaxy-central/database/job_working_directory
    object_store_store_by: uuid
    id_secret: d5c910cc6e32cad08599987ab64dcfae
    job_config: ${galaxy_job_config}

  gravity:
    process_manager: systemd
    galaxy_root: /galaxy
    galaxy_user: galaxy
    virtualenv: /galaxy_venv
    gunicorn:
      # listening options
      bind: galaxy-server:5555
      # performance options
      workers: 2
      # Other options that will be passed to gunicorn
      # This permits setting of 'secure' headers like REMOTE_USER (and friends)
      # https://docs.gunicorn.org/en/stable/settings.html#forwarded-allow-ips
      extra_args: '--forwarded-allow-ips="*"'
      # This lets Gunicorn start Galaxy completely before forking which is faster.
      # https://docs.gunicorn.org/en/stable/settings.html#preload-app
      preload: true
    celery:
      concurrency: 2
      loglevel: DEBUG
    handlers:
      handler:
        processes: 2
        pools:
          - job-handlers
          - workflow-schedulers

pulsar:
  conda_auto_init: True
  conda_auto_install: True
  tool_dependency_dir: dependencies
  dependency_resolvers_config_file: config/dependency_resolvers_conf.xml

# Probably needs more polishing, but at least it works..
slurm:
  ControlMachine: "slurmctld"
  AuthType: "auth/munge"
  CacheGroups: "0"
  CryptoType: "crypto/munge"
  MpiDefault: "none"
  ProctrackType: "proctrack/pgid"
  ReturnToService: "1"
  SlurmctldPidFile: "/var/run/slurmctld.pid"
  SlurmctldPort: "6817"
  SlurmdPidFile: "/var/run/slurmd.pid"
  SlurmdPort: "6818"
  SlurmdSpoolDir: "/tmp/slurmd"
  SlurmUser: "slurm"
  StateSaveLocation: "/tmp/slurm"
  SwitchType: "switch/none"
  TaskPlugin: "task/none"
  InactiveLimit: "0"
  KillWait: "30"
  MinJobAge: "300"
  SlurmctldTimeout: "120"
  SlurmdTimeout: "300"
  Waittime: "0"
  FastSchedule: "1"
  SchedulerType: "sched/backfill"
  SchedulerPort: "7321"
  SelectType: "select/cons_res"
  SelectTypeParameters: "CR_Core_Memory"
  AccountingStorageType: "accounting_storage/none"
  AccountingStoreJobComment: "YES"
  ClusterName: "Cluster"
  JobCompType: "jobcomp/none"
  JobAcctGatherFrequency: "30"
  JobAcctGatherType: "jobacct_gather/none"
  SlurmctldDebug: info
  SlurmdDebug: info

htcondor_galaxy:
  CONDOR_HOST: "htcondor-master"
  ALLOW_ADMINISTRATOR: "*"
  ALLOW_OWNER: "*"
  ALLOW_READ: "*"
  ALLOW_WRITE: "*"
  ALLOW_CLIENT: "*"
  ALLOW_NEGOTIATOR: "*"
  DAEMON_LIST: "MASTER, SCHEDD"
  UID_DOMAIN: "galaxy"
  DISCARD_SESSION_KEYRING_ON_STARTUP: "False"
  TRUST_UID_DOMAIN: "true"

htcondor_master:
  BASE_CGROUP: ""
  CONDOR_HOST: "$(FULL_HOSTNAME)"
  DAEMON_LIST: "MASTER, COLLECTOR, NEGOTIATOR, SCHEDD"
  DISCARD_SESSION_KEYRING_ON_STARTUP: "False"
  TRUST_UID_DOMAIN: "True"
  ALLOW_ADMINISTRATOR: "*"
  ALLOW_OWNER: "*"
  ALLOW_READ: "*"
  ALLOW_WRITE: "*"
  ALLOW_NEGOTIATOR: "*"
  ALLOW_NEGOTIATOR_SCHEDD: "*"
  ALLOW_WRITE_COLLECTOR: "*"
  ALLOW_WRITE_STARTD: "*"
  ALLOW_READ_COLLECTOR: "*"
  ALLOW_READ_STARTD: "*"
  ALLOW_CLIENT: "*"
  DOCKER_IMAGE_CACHE_SIZE: "20"
  UID_DOMAIN: "galaxy"

htcondor_executor:
  CONDOR_HOST: "htcondor-master"
  DAEMON_LIST: "MASTER, STARTD"
  DISCARD_SESSION_KEYRING_ON_STARTUP: "False"
  TRUST_UID_DOMAIN: "true"
  NUM_SLOTS: "1"
  NUM_SLOTS_TYPE_1: "1"
  BASE_CGROUP: ""
  ALLOW_ADMINISTRATOR: "*"
  ALLOW_OWNER: "*"
  ALLOW_READ: "*"
  ALLOW_WRITE: "*"
  ALLOW_CLIENT: "*"
  ALLOW_NEGOTIATOR_SCHEDD: "*"
  ALLOW_WRITE_COLLECTOR: "*"
  ALLOW_WRITE_STARTD: "*"
  ALLOW_READ_COLLECTOR: "*"
  ALLOW_READ_STARTD: "*"
  UID_DOMAIN: "galaxy"
  SCHED_NAME: "htcondor-master"